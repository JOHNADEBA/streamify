"use client";

import Link from "next/link";
import {
  formatCategoryDisplay,
  formattedDate,
  formattedMinString,
} from "../utils";
import { useEffect, useState } from "react";
import api from "../services/api";
import { Video } from "../types";
import LoadingSpinner from "./LoadingSpinner";
import ErrorMessage from "./ErrorMessage";
import { SET_VIDEO } from "../actions";
import { useAppContext } from "../context";

const Movie = ({ id: movieId }: { id: string }) => {
  const {dispatch} = useAppContext()
  
  const [video, setVideo] = useState<Video>({
    id: "",
    title: "",
    description: "",
    thumbnail: "",
    releaseDate: "",
    duration: 0,
    views: 0,
    muxAssetId: "",
    muxPlaybackId: "",
    aspectRatio: "",
    categories: [],
    createdAt: "",
    updatedAt: "",
  });
  const [loading, setLoading] = useState<boolean>(true);
  const [error, setError] = useState<string>("");
  const [videoThumbnail, setVideoThumbnail] = useState<string>("");

  const defaultImg =
    "data:image/jpeg;base64,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";

  useEffect(() => {
    const fetchData = async () => {
      if (!movieId) return;
      const video = await api.get<Video>(`/videos/${movieId}`, {}, setLoading);

      if (video.error) {
        setError(video.error);
      }

      if (video.data) {
        setVideo(video.data);
        setError("");
      }
    };

    fetchData();
  }, []);

  useEffect(() => {
    if (video.thumbnail) {
      const isValidImageUrl = (url: string) => {
        return new Promise((resolve) => {
          const img = new Image();
          img.onload = () => resolve(true);  // Image loaded successfully
          img.onerror = () => resolve(false);  // Image failed to load
          img.src = url;
        });
      };

      const checkThumbnail = async () => {
        const isValid = await isValidImageUrl(video.thumbnail);
        setVideoThumbnail(isValid ? video.thumbnail : defaultImg);
      };

      checkThumbnail();
    } else {
      setVideoThumbnail(defaultImg);  // Set default if no thumbnail
    }
  }, [video.thumbnail]);

  if (loading) {
    return (
      <div className="flex justify-center items-center h-full">
        <LoadingSpinner />
      </div>
    );
  }

  if (error) {
    return (
      <div className="col-span-full text-center text-red-500">
        <ErrorMessage message={error} />
      </div>
    );
  }

  const {
    id,
    title,
    categories,
    description,
    thumbnail,
    releaseDate,
    duration,
    views,
  } = video;

  return (
    <div
      className="relative flex flex-col md:flex-row items-center justify-center text-white rounded-lg overflow-hidden shadow-lg 
      w-full md:w-3/4 mx-auto min-h-screen md:min-h-[60vh] lg:min-h-[80vh] py-8 md:py-0"
      style={{
        backgroundImage: `url(${videoThumbnail})`,
        backgroundSize: "cover",
        backgroundPosition: "center",
      }}
    >
      {/* Overlay */}
      <div className="absolute inset-0 bg-black bg-opacity-70"></div>

      <div className="relative flex flex-col md:flex-row w-full items-center md:items-start">
        {/* Left: Movie Poster */}
        <div className="relative w-full md:w-1/3 p-4 flex justify-center">
          <img
            className="w-3/4 md:w-full rounded-lg shadow-lg"
            src={videoThumbnail}
            alt={title}
          />
        </div>

        {/* Right: Movie Details */}
        <div className="relative w-full md:w-2/3 p-4 md:p-6 text-center md:text-left">
          {/* Title & Release Info */}
          <h1 className="text-2xl md:text-4xl font-bold">
            {title}{" "}
            <span className="text-gray-300 text-xl md:text-2xl">
              ({new Date(releaseDate).getFullYear()})
            </span>
          </h1>
          <p className="text-gray-400 mt-1">
            {formattedDate(releaseDate)} • {formatCategoryDisplay(categories)} •{" "}
            {Math.round(duration)}
            {formattedMinString(Math.round(duration))}
          </p>

          {/* Description */}
          <h2 className="mt-4 text-lg md:text-xl font-semibold">Overview</h2>
          <p className="mt-2 text-gray-200">{description}</p>

          {/* Extra Details */}
          <p className="mt-4 text-gray-400">Views: {views}</p>

          {/* Play video */}
          <Link
            href={`/stream/${id}`}
            passHref
            className="mt-4 bg-red-600 text-white px-6 py-2 rounded-md font-bold flex items-center justify-center w-48 
            hover:bg-red-700 hover:scale-105 transition-all duration-300 mx-auto md:mx-0"
            onClick={()=> dispatch({type:SET_VIDEO, payload: video})}
          >
            ▶ Watch Movie
          </Link>
        </div>
      </div>
    </div>
  );
};

export default Movie;
